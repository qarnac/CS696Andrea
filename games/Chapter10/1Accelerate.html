<!doctype html>
<head>
	<meta charset="utf-8">
	<title>Acceleration</title>
<head>
<body>
	<canvas width="550" height="400" style="border: 1px dashed black"></canvas>
	<script src="requestAnimationFramePolyfill.js"></script>
	<script type="text/javascript">
		var spriteObject =
		{
			sourceX: 0,
			sourceY: 0,
			sourceWidth: 64,
			sourceHeight: 64,
			width: 64,
			height: 64,
			x: 0,
			y: 0,
			vx: 0,
			vy: 0,
			visible: true,
			
			//Physics properties
			accelerationX: 0,
			accelerationY: 0,
			speedLimit: 5,
			friction: 0.96,
			bounce: -0.7,
			gravity: 0.3,
			//Platform game properties
			isOnGround: undefined,
			jumpForce: -10,
			
			//Getters
			centerX: function()
			{
				return this.x + (this.width / 2);
			},
			centerY: function()
			{
				return this.y + (this.height / 2);
			},
			halfWidth: function()
			{
				return this.width / 2;
			},
			halfHeight: function()
			{
				return this.height / 2;
			}
		};
		
		//--- The main program

		//The canvas
		var canvas = document.querySelector("canvas"); 
		var drawingSurface = canvas.getContext("2d");
		
		//Object arrays
		var sprites = [];
		var assetsToLoad = [];
		var assetsLoaded = 0;
		
		//The cat
		var cat = Object.create(spriteObject);
		cat.x = canvas.width / 2 - cat.halfWidth();
		cat.y = canvas.height / 2 - cat.halfHeight();
		sprites.push(cat);

		//Load the tilesheet image
		var image = new Image();
		image.addEventListener("load", loadHandler, false);
		image.src = "cat.png";
		assetsToLoad.push(image);
		
		//Arrow key codes
		var UP = 38;
		var DOWN = 40;
		var RIGHT = 39;
		var LEFT = 37;

		//Directions
		var moveUp = false;
		var moveDown = false;
		var moveRight = false;
		var moveLeft = false;
		
		//Add keyboard listeners
		window.addEventListener("keydown", function(event)
		{
		  switch(event.keyCode)
		  {
			case UP:
				moveUp = true;
				break;
			  
			  case DOWN:
				moveDown = true;
				break;
				
			  case LEFT:
				moveLeft = true;
				break;  
				
			  case RIGHT:
				moveRight = true;
				break; 
		  }
		}, false);

		window.addEventListener("keyup", function(event)
		{
		  switch(event.keyCode)
		  {
			case UP:
				moveUp = false;
				break;
			  
			  case DOWN:
				moveDown = false;
				break;
				
			  case LEFT:
				moveLeft = false;
				break;  
				
			  case RIGHT:
				moveRight = false;
				break; 
		  }
		}, false);

		update();
		

	
	</script>
</body>