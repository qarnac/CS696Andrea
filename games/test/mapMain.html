<!doctype html>
<head>
	<meta charset="utf-8">
	<title>The Forest of Lyrica - 1</title>
	<script>
		function render()
		{
			//Render the location
			output.innerHTML = map[mapLocation];
			image.src = "./images/" + images[mapLocation];
			
			console.log(image.src);
			
			//Display the game message
			output.innerHTML += "<br><em>" + gameMessage + "</em>";
		}
		
		function clickHandler()
		{
			playGame();
		}
		
		function playGame()
		{
			//Get the player's input and convert it to lowercase
			playersInput = input.value;
			playersInput = playersInput.toLowerCase();
			//Reset these variables from the previous turn
			gameMessage = "";
			action = "";
			
			//Figure out the player's action
			for(i = 0; i < actionsIKnow.length; i++)
			{
				if(playersInput.indexOf(actionsIKnow[i]) !== -1)
				{
					action = actionsIKnow[i];
					console.log("player's action: " + action);
					break;
				}
			}
			
			//Choose the correct action
			switch(action)
			{
				case "north":
				mapLocation -= 3;
				break;
				case "east":
				mapLocation += 1;
				break;
				case "south":
				mapLocation += 3;
				break;
				case "west":
				mapLocation -= 1;
				break;
				default:
				gameMessage = "I don't understand that.";
			}
			
			//Render the game
			render();
		}

		//Initialize the player's input
		var playersInput = "";
		
		//Initialize the gameMessage
		var gameMessage = "";
		
		var map = [];
		var mapLocation = 4;
		
		//Create an array of actions the game understands
		//and a variable to store the current action
		var actionsIKnow = ["north", "east", "south", "west"];
		var action = "";
		var images = [];
		var blockedPathMessages = [];
	</script>
</head>
<body>
	<img src="./images/path.png" width="300" height="267">
	<p id="output"></p>
	<input id="input" type="text" placeholder="Enter your action...">
	<button>enter</button>

	<script>
		map[0] = "An old stone keep.";
		map[1] = "A deep well.";
		map[2] = "A sunny glade.";
		map[3] = "A sleeping dragon.";
		map[4] = "A narrow pathway.";
		map[5] = "An ancient gate.";
		map[6] = "The edge of a river.";
		map[7] = "A lonely wooden bench.";
		map[8] = "An isolated cottage. Faint music comes from inside.";
		
		
		images[0] = "keep.png";
		images[1] = "well.png";
		images[2] = "glade.png";
		images[3] = "dragon.png";
		images[4] = "path.png";
		images[5] = "gate.png";
		images[6] = "river.png";
		images[7] = "bench.png";
		images[8] = "cottage.png";
		
		blockedPathMessages[0] = "It's too dangerous to move that way.";
		blockedPathMessages[1] = "A mysterious force holds you back.";
		blockedPathMessages[2] = "A tangle of thorns blocks your way.";
		blockedPathMessages[3] = "You can't step over the dragon.";
		blockedPathMessages[4] = "";
		blockedPathMessages[5] = "The gate locks shut.";
		blockedPathMessages[6] = "The river is too deep to cross.";
		blockedPathMessages[7] = "The trees are too thick to pass.";
		blockedPathMessages[8] = "You're too scared to go that way.";
		
		//The input and output fields
		var output = document.querySelector("#output");
		var input = document.querySelector("#input");
		var image = document.querySelector("img");
		
		//Display the player's location
		output.innerHTML = map[mapLocation];
		
		//The button
		var button = document.querySelector("button");
		button.style.cursor = "pointer";
		button.addEventListener("click", clickHandler, false);
	</script>
</body>