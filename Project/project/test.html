<!DOCTYPE HTML>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<script type="text/javascript" charset="utf-8" src="jquery-1.10.2.js"></script>
</head>
<body>

	<div>
    <p>Camera<br>
	
    <input id="camerainput" type="file" accept="video/*,image/*">
	<input type="button" id="go" value="Click Me To View Your Location" />
	<canvas width="device-width" height="device-height" style="border: 1px dashed black"/>
	
	<script>
		$(document).ready(function () {
			// wire up button click
			$('#go').click(function () {
				// test for presence of geolocation
				if (navigator && navigator.geolocation) {
					navigator.geolocation.getCurrentPosition(geo_success, geo_error);
				} else {
					error('Geolocation is not supported.');
				}
			});
		});
		
		function geo_success(position) {
			printLatLong(position.coords.latitude, position.coords.longitude);
		}
 
		// The PositionError object returned contains the following attributes:
		// code: a numeric response code
		// PERMISSION_DENIED = 1
		// POSITION_UNAVAILABLE = 2
		// TIMEOUT = 3
		// message: Primarily for debugging. It's recommended not to show this error
		// to users.
		function geo_error(err) {
			if (err.code == 1) {
				error('The user denied the request for location information.')
			} else if (err.code == 2) {
				error('Your location information is unavailable.')
			} else if (err.code == 3) {
				error('The request to get your location timed out.')
			} else {
				error('An unknown error occurred while requesting your location.')
			}
		}
		
	
	  
		
		
		// output lat and long
		function printLatLong(lat, long) {
		$('#replyBox').val($('#replyBox').val()+quote); 
			$('body').append('<p>Lat: ' + lat + '</p>');
			$('body').append('<p>Long: ' + long + '</p>');
		}
 
		function error(msg) {
			alert(msg);
		}
	
	
		//1. Get a reference to the canvas
		var canvas = document.querySelector("canvas");

		//2. Get a reference to the canvas's drawing surface
		var drawingSurface = canvas.getContext("2d");

		var cameraInput = document.getElementById('camerainput');
		cameraInput.addEventListener('change', handleFiles);
		
		var img = new Image;
		
		function handleFiles(e) {
			img.src = URL.createObjectURL(e.target.files[0]);
			img.onload = function() {
				loadHandler();
			}
		}
		
		/*
		document.getElementById('camerainput').addEventListener('change', readSingleFile, false);
		var canvas = document.getElementById("camerainput");
		var cc = canvas.getContext("2d");
		
		// Define viewports for scrolling inside the canvas

		/* Viewport x position    view_xview = 0;
		/* Viewport y position    view_yview = 0;
		/* Viewport width         view_wview = 960;
		/* Viewport height        view_hview = 560;
		/* Sector width          room_width = 5000;
		/* Sector height          room_height = 3000;

		canvas.width = view_wview;
		canvas.height = view_hview;
		*/
		
		//4. Add a listener to the image to call the 
		//render function when the image has loaded
		img.addEventListener("load", loadHandler, false);
		
		function loadHandler()
		{ 
		
		  //6. Draw the img onto the drawingSurface
		  //drawingSurface.drawImage(img, 20, 20);
		  drawingSurface.drawImage
		  (
			img, 
			0, 0, img.width, img.height,
			0, 0, canvas.width, canvas.height
		  );
		  
		}
	</script>
	</div>
</body>