<!DOCTYPE HTML>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<script type="text/javascript" charset="utf-8" src="jquery-1.10.2.js"></script>
</head>
<body>
   <form>
     <input type="button" onclick="getLocationUpdate();" value="GPS test"/>
   </form>
	<div>
    <p>Camera<br>
	
    <input id="camerainput" type="file" accept="video/*,image/*">
	<canvas width="device-width" height="device-height" style="border: 1px dashed black"/>
	
	<script>	
	var watchID;
	var geoLoc;

	function showLocation(position) {
	  var latitude = position.coords.latitude;
	  var longitude = position.coords.longitude;
	  alert("Latitude : " + latitude + " Longitude: " + longitude);
	}

	function errorHandler(err) {
	  if(err.code == 1) {
		alert("Error: Access is denied!");
	  }else if( err.code == 2) {
		alert("Error: Position is unavailable!");
	  }
	}
	function getLocationUpdate(){

	   if(navigator.geolocation){
		  // timeout at 60000 milliseconds (60 seconds)
		  var options = {timeout:60000};
		  geoLoc = navigator.geolocation;
		  watchID = geoLoc.getCurrentPosition (showLocation, 
										 errorHandler, options);
	   }else{
		  alert("Sorry, browser does not support geolocation!");
	   }
	}
	
	
		//1. Get a reference to the canvas
		var canvas = document.querySelector("canvas");

		//2. Get a reference to the canvas's drawing surface
		var drawingSurface = canvas.getContext("2d");

		var cameraInput = document.getElementById('camerainput');
		cameraInput.addEventListener('change', handleFiles);
		
		var img = new Image;
		
		function handleFiles(e) {
			img.src = URL.createObjectURL(e.target.files[0]);
			img.onload = function() {
				loadHandler();
			}
		}
		
		/*
		document.getElementById('camerainput').addEventListener('change', readSingleFile, false);
		var canvas = document.getElementById("camerainput");
		var cc = canvas.getContext("2d");
		
		// Define viewports for scrolling inside the canvas

		/* Viewport x position    view_xview = 0;
		/* Viewport y position    view_yview = 0;
		/* Viewport width         view_wview = 960;
		/* Viewport height        view_hview = 560;
		/* Sector width          room_width = 5000;
		/* Sector height          room_height = 3000;

		canvas.width = view_wview;
		canvas.height = view_hview;
		*/
		
		//4. Add a listener to the image to call the 
		//render function when the image has loaded
		img.addEventListener("load", loadHandler, false);
		
		function loadHandler()
		{ 
		
		  //6. Draw the img onto the drawingSurface
		  //drawingSurface.drawImage(img, 20, 20);
		  drawingSurface.drawImage
		  (
			img, 
			0, 0, img.width, img.height,
			0, 0, canvas.width, canvas.height
		  );
		  
		}
	</script>
	</div>
</body>